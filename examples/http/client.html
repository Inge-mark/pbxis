<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html> <head>
<title>PBXIS</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
</head>
<script
src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"
type="text/javascript"></script>
<script type="text/javascript" src="/pbxis-client.js"></script>
<script type="text/javascript" src="$pbxis-adapter.js$"></script>
<script type="text/javascript">
  function pbx_connection(is_connected) {
    $('#connection').html(is_connected? 'connected' : 'disconnected');
    if (!is_connected)
      $.each(['$ag1$_$q1$_agent_status','$ag1$_$q2$_agent_status',
              '$ag2$_$q1$_agent_status','$ag2$_$q2$_agent_status',
              '$ag1$_ext_status','$ag2$_ext_status',
              '$ag1$_phone_num','$ag2$_phone_num',
              '$q1$_queue_count','$q2$_queue_count'],
      function(_,id) { $('#'+id).html('---'); })
  }
  function pbx_agent_status(agent, queue, status) {
    $('#' + agent + '_' + queue + '_agent_status').html(status);
  }
  function pbx_extension_status(agent, status) {
    $('#' + agent + '_ext_status').html(status);
  }
  function pbx_queue_count(queue, count) {
    $('#' + queue + '_queue_count').html(count)
  }
  function pbx_phone_num(agent, num) {
    $('#' + agent + '_phone_num').html(num);
  }
  $(function() { pbx_connection(false); pbx_start(['$ag1$', '$ag2$'], ['$q1$', '$q2$']);})
</script>
<body>

<h3>Connection: <span id="connection">disconnected</span></h3>

<p>Calls wating on Queue $q1$: <span id="$q1$_queue_count">---</span></p>
<p>Calls wating on Queue $q2$: <span id="$q2$_queue_count">---</span></p>

<table>
<tr><th>Agent $ag1$</th><th>Agent $ag2$</th></tr>
<tr><td><table border="1px">
  <tr><td align="right">Extension status</td><td><span id="$ag1$_ext_status"></span></td></tr>
  <tr><td align="right">Phone number</td><td><span id="$ag1$_phone_num"></span></td></tr>
  <tr><td align="right">Status in queue $q1$</td><td><span id="$ag1$_$q1$_agent_status"></span></td></tr>
  <tr><td align="right">Status in queue $q2$</td><td><span id="$ag1$_$q2$_agent_status"></span></td></tr>
</table></td>
<td><table border="1px">
  <tr><td align="right">Extension status</td><td><span id="$ag2$_ext_status"></span></td></tr>
  <tr><td align="right">Phone number</td><td><span id="$ag2$_phone_num"></span></td></tr>
  <tr><td align="right">Status in queue $q1$</td><td><span id="$ag2$_$q1$_agent_status"></span></td></tr>
  <tr><td align="right">Status in queue $q2$</td><td><span id="$ag2$_$q2$_agent_status"></span></td></tr>
</table></td>
</tr></table>

<hr>
</body> </html>
